<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nebula | Gerenciamento de Conteúdo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <style>
    /* Estilos para o seletor de cor */
    input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
    input[type="color"]::-webkit-color-swatch { border: none; border-radius: 0.375rem; }
    input[type="color"]::-moz-color-swatch { border: none; border-radius: 0.375rem; }
    /* Estilos para o botão flutuante e notificação */
    .save-button { position: fixed; bottom: 2rem; right: 2rem; z-index: 1000; }
    .notification {
        position: fixed; bottom: 2rem; left: 50%;
        transform: translateX(-50%); z-index: 1100;
        transition: opacity 0.5s, transform 0.5s;
    }
    .notification.hidden { opacity: 0; transform: translate(-50%, 2rem); }
    .collapsible-content {
        transition: max-height 0.5s ease-in-out, opacity 0.3s ease-in-out, padding 0.5s ease-in-out;
        overflow: hidden;
    }
    .collapsible-content.collapsed {
        max-height: 0 !important; opacity: 0; padding-top: 0 !important;
        padding-bottom: 0 !important; margin-top: 0 !important;
    }
    .youtube-player-container {
        position: relative; width: 100%; padding-bottom: 56.25%; /* 16:9 */
        height: 0; overflow: hidden; margin-bottom: 2rem;
    }
    .youtube-player-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
    .loader-container {
        display: flex; align-items: center; justify-content: center;
        height: 100vh; background-color: #111827; color: #9ca3af; font-size: 1.2rem;
    }
  </style>
</head>
<body class="bg-gray-900 text-white">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, Fragment } = React;

    // --- ÍCONES ---
    const StarIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path strokeLinecap="round" strokeLinejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>);
    const SoundWaveIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path strokeLinecap="round" strokeLinejoin="round" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 6l12-3" /></svg>);
    const SmartPhoneIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path strokeLinecap="round" strokeLinejoin="round" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg>);
    const FacebookIcon = () => (<svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fillRule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clipRule="evenodd" /></svg>);
    const InstagramIcon = () => (<svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fillRule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049 1.064.218 1.791.465 2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.08 2.525c.636-.247 1.363-.416 2.427-.465C9.53 2.013 9.884 2 12.315 2zM12 7.167a4.833 4.833 0 100 9.666 4.833 4.833 0 000-9.666zM12 15a3 3 0 110-6 3 3 0 010 6zm4.833-8.167a1.167 1.167 0 100-2.334 1.167 1.167 0 000 2.334z" clipRule="evenodd" /></svg>);
    const TwitterIcon = () => (<svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" /></svg>);
    const ChevronIcon = ({className}) => (<svg xmlns="http://www.w3.org/2000/svg" className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" /></svg>);

    // --- COMPONENTES DA PÁGINA ---
    const Header = ({ companyInfo, menuItems }) => (
      <header className="fixed top-0 left-0 right-0 z-50 bg-black/30 backdrop-blur-sm">
        <div className="container mx-auto px-6 py-4 flex justify-between items-center">
          <a href="/#" className="flex items-center space-x-2">
            <img src={companyInfo.logoUrl} alt={`${companyInfo.name} Logo`} className="w-8 h-8"/>
            <h1 className="text-2xl font-bold text-[var(--color-text-primary)] tracking-wider">{companyInfo.name}</h1>
          </a>
          <nav className="hidden sm:flex items-center space-x-6">
            {menuItems.map((item, index) => (
              <a key={index} href={item.link} className="text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)] transition duration-300">{item.text}</a>
            ))}
          </nav>
        </div>
      </header>
    );

    const Hero = ({ content }) => {
      const getYouTubeEmbedUrl = (url) => {
        if (!url) return null;
        const youtubeRegex = /^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
        const match = url.match(youtubeRegex);
        return match?.[1] ? `https://www.youtube.com/embed/${match[1]}?autoplay=1&mute=1&loop=1&playlist=${match[1]}&controls=0` : null;
      };
      const embedUrl = getYouTubeEmbedUrl(content.videoUrl);
      return (
        <section id="attention" className="min-h-screen flex items-center justify-center text-center relative overflow-hidden">
          <div className="absolute inset-0 bg-cover bg-center z-0" style={{ backgroundImage: `url('https://picsum.photos/1920/1080?random=1&blur=5')` }}><div className="absolute inset-0 bg-gray-900 bg-opacity-60"></div></div>
          <div className="relative z-10 px-6 max-w-4xl mx-auto pt-28">
            {content.showVideo && embedUrl && (
              <div className="max-w-3xl mx-auto">
                <div className="youtube-player-container rounded-lg shadow-2xl">
                  <iframe src={embedUrl} title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen></iframe>
                </div>
              </div>
            )}
            <h1 className="text-4xl md:text-6xl lg:text-7xl font-extrabold text-[var(--color-text-primary)] mb-4 leading-tight tracking-tight">{content.titleLine1} <br /> <span className="text-[var(--color-accent)]">{content.titleLine2}</span></h1>
            <p className="text-lg md:text-xl max-w-3xl mx-auto text-gray-300 mb-8">{content.subtitle}</p>
            <a href="#interest" className="bg-white text-[var(--color-primary)] font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 inline-block">Descubra a Magia</a>
          </div>
        </section>
      );
    };
    
    const Features = ({ features }) => {
        const featureIcons = [<StarIcon className="w-12 h-12 text-[var(--color-accent)]" />, <SoundWaveIcon className="w-12 h-12 text-[var(--color-accent)]" />, <SmartPhoneIcon className="w-12 h-12 text-[var(--color-accent)]" />];
        return (
            <section id="interest" className="py-20 bg-[var(--color-background-dark)]">
                <div className="container mx-auto px-6 text-center">
                    <h2 className="text-3xl md:text-4xl font-bold mb-4 text-[var(--color-text-primary)]">Por Que o Nebula é Diferente de Tudo que Você Já Viu?</h2>
                    <p className="text-[var(--color-text-secondary)] max-w-2xl mx-auto mb-12">Nebula não é apenas um projetor, é uma experiência de bem-estar completa, projetada pela ciência para melhorar seu sono e relaxamento.</p>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-12">
                        {features.map((feature, index) => (
                            <div key={index} className="flex flex-col items-center p-6 bg-[var(--color-background-light)] rounded-lg shadow-lg">
                                <div className="mb-4">{featureIcons[index] || featureIcons[0]}</div>
                                <h3 className="text-xl font-semibold mb-2 text-[var(--color-text-primary)]">{feature.title}</h3>
                                <p className="text-[var(--color-text-secondary)]">{feature.description}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>
        );
    };

    const Solutions = ({ solutions }) => (
      <section id="solutions" className="py-20 bg-[var(--color-background-dark)]">
        <div className="container mx-auto px-6">
          <div className="text-center mb-12">
            <h2 className="text-3xl md:text-4xl font-bold text-[var(--color-text-primary)] mb-4">Soluções Para o Seu Bem-Estar</h2>
            <p className="text-[var(--color-text-secondary)] max-w-2xl mx-auto">Veja como o Nebula se adapta à sua vida, trazendo mais tranquilidade e momentos inesquecíveis.</p>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {solutions.map((solution, index) => (
              <div key={index} className="bg-[var(--color-background-light)] rounded-lg shadow-lg overflow-hidden flex flex-col">
                <img src={solution.imageUrl} alt={solution.title} className="w-full h-56 object-cover" />
                <div className="p-6 flex flex-col flex-grow">
                  <h3 className="text-xl font-semibold text-[var(--color-text-primary)] mb-2">{solution.title}</h3>
                  <p className="text-[var(--color-text-secondary)] mb-4 flex-grow">{solution.description}</p>
                  <a href="#comprar" className="mt-auto bg-[var(--color-primary)] text-white font-bold py-2 px-4 rounded-full text-center hover:opacity-90 transition duration-300 transform hover:scale-105">{solution.buttonText}</a>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>
    );

    const Testimonials = ({ testimonials }) => (
      <section id="desire" className="py-20 bg-[var(--color-background-light)]">
        <div className="container mx-auto px-6">
          <h2 className="text-3xl md:text-4xl font-bold text-center mb-12 text-[var(--color-text-primary)]">Veja o Que Nossos Clientes Estão Sonhando</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {testimonials.map((testimonial, index) => (
              <div key={index} className="bg-[var(--color-background-dark)] p-8 rounded-lg shadow-xl flex flex-col">
                <p className="text-gray-300 italic mb-6 flex-grow">"{testimonial.quote}"</p>
                <div className="flex items-center">
                  <img src={testimonial.avatarUrl} alt={testimonial.name} className="w-12 h-12 rounded-full mr-4 object-cover" />
                  <div>
                    <h4 className="font-semibold text-[var(--color-text-primary)]">{testimonial.name}</h4>
                    <p className="text-[var(--color-accent)] text-sm">{testimonial.role}</p>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>
    );

    const FAQ = ({ faqData }) => {
      const [openIndex, setOpenIndex] = useState(null);
      return (
        <section id="faq" className="py-20 bg-[var(--color-background-light)]">
          <div className="container mx-auto px-6 max-w-3xl">
            <h2 className="text-3xl md:text-4xl font-bold text-center text-[var(--color-text-primary)] mb-10">Perguntas Frequentes</h2>
            <div className="bg-[var(--color-background-dark)] rounded-lg shadow-xl px-6">
              {faqData.map((item, index) => (
                <div className="border-b border-gray-700" key={index}>
                  <button onClick={() => setOpenIndex(openIndex === index ? null : index)} className="w-full text-left py-6 flex justify-between items-center focus:outline-none" aria-expanded={openIndex === index}>
                    <h3 className="text-lg font-medium text-[var(--color-text-primary)]">{item.question}</h3>
                    <span className={`text-[var(--color-accent)] transform transition-transform duration-300 ${openIndex === index ? 'rotate-180' : 'rotate-0'}`}><svg xmlns="http://www.w3.org/2000/svg" className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" /></svg></span>
                  </button>
                  <div className={`overflow-hidden transition-max-height duration-500 ease-in-out ${openIndex === index ? 'max-h-96' : 'max-h-0'}`}><p className="pb-6 pr-4 text-[var(--color-text-secondary)]">{item.answer}</p></div>
                </div>
              ))}
            </div>
          </div>
        </section>
      );
    };

    const CTA = ({ content }) => (
      <section id="comprar" className="py-20 bg-[var(--color-background-dark)]">
        <div className="container mx-auto px-6">
          <div className="bg-gradient-to-r from-[var(--color-primary)] to-purple-800 rounded-lg shadow-2xl p-8 md:p-12 flex flex-col-reverse md:flex-row items-center">
            <div className="md:w-1/2 text-center md:text-left mt-8 md:mt-0">
              <h2 className="text-3xl md:text-4xl font-extrabold text-white mb-4">{content.title}</h2>
              <p className="text-indigo-200 mb-6">{content.subtitle}</p>
              <div className="text-4xl font-bold text-white mb-6"><span className="text-lg opacity-70 line-through mr-2">{content.originalPrice}</span>{content.discountedPrice}</div>
              <a href="#" className="bg-white text-[var(--color-primary)] font-bold py-4 px-10 rounded-full text-lg transition duration-300 transform hover:scale-105 inline-block shadow-lg">{content.buttonText}</a>
            </div>
            <div className="md:w-1/2 flex justify-center"><img src="https://picsum.photos/400/400?random=5" alt="Nebula Product" className="rounded-lg shadow-xl" /></div>
          </div>
        </div>
      </section>
    );

    const Footer = ({ companyInfo, footerInfo }) => (
      <footer className="bg-[var(--color-background-light)] text-[var(--color-text-secondary)]">
        <div className="container mx-auto px-6 py-12">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
            <div>
              <div className="flex items-center justify-center md:justify-start space-x-2 mb-4">
                <img src={companyInfo.logoUrl} alt={`${companyInfo.name} Logo`} className="w-8 h-8"/>
                <h1 className="text-2xl font-bold text-white tracking-wider">{companyInfo.name}</h1>
              </div>
              <p className="text-sm">{companyInfo.tagline}</p>
            </div>
            <div>
              <h3 className="text-white font-semibold tracking-wider mb-4 uppercase">Contato</h3>
              <ul className="space-y-3 text-sm">
                <li className="flex items-start justify-center md:justify-start">
                    <span className="mt-1 mr-2 h-5 w-5 text-[var(--color-accent)] flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" /></svg></span>
                    <span style={{whiteSpace: 'pre-wrap'}}>{footerInfo.address}</span>
                </li>
                <li className="flex items-center justify-center md:justify-start">
                    <span className="mr-2 h-5 w-5 text-[var(--color-accent)] flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" /></svg></span>
                    <a href={`tel:${footerInfo.phone}`} className="hover:text-white transition-colors">{footerInfo.phone}</a>
                </li>
                <li className="flex items-center justify-center md:justify-start">
                    <span className="mr-2 h-5 w-5 text-[var(--color-accent)] flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25-2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" /></svg></span>
                    <a href={`mailto:${footerInfo.email}`} className="hover:text-white transition-colors">{footerInfo.email}</a>
                </li>
              </ul>
            </div>
            <div>
              <h3 className="text-white font-semibold tracking-wider mb-4 uppercase">Siga-nos</h3>
              <div className="flex space-x-4 justify-center md:justify-start">
                <a href={footerInfo.social.facebook} className="hover:text-white transition-colors"><FacebookIcon /></a>
                <a href={footerInfo.social.instagram} className="hover:text-white transition-colors"><InstagramIcon /></a>
                <a href={footerInfo.social.twitter} className="hover:text-white transition-colors"><TwitterIcon /></a>
              </div>
            </div>
          </div>
          <div className="mt-12 border-t border-gray-700 pt-6 text-center text-sm">
            <p>&copy; {new Date().getFullYear()} {companyInfo.name}. Todos os direitos reservados.</p>
            <div className="mt-4 space-x-4 text-xs">
              <a href="#" className="hover:text-white transition-colors">Privacidade e Cookies</a><span className="text-gray-600">|</span>
              <a href="#/admin" className="hover:text-white transition-colors">Gerenciar</a>
            </div>
          </div>
        </div>
      </footer>
    );

    // --- PAINEL DE ADMINISTRAÇÃO ---
    const AdminDashboard = ({ data, contentDocRef }) => {
      const [localData, setLocalData] = useState(data);
      const [notification, setNotification] = useState({ visible: false, message: '', type: 'success' });
      const [openSections, setOpenSections] = useState({});

      useEffect(() => { setLocalData(data); }, [data]);

      const toggleSection = (section) => setOpenSections(prev => ({ ...prev, [section]: !prev[section] }));

      const handleSave = async () => {
        try {
          await contentDocRef.set(localData);
          setNotification({ visible: true, message: 'Alterações publicadas online com sucesso!', type: 'success' });
        } catch (error) {
          console.error("Error saving to Firestore: ", error);
          setNotification({ visible: true, message: 'Erro ao publicar. Tente novamente.', type: 'error' });
        } finally {
          setTimeout(() => setNotification(prev => ({ ...prev, visible: false })), 5000);
        }
      };

      const handleInputChange = (section, field, value) => setLocalData(prev => ({ ...prev, [section]: { ...prev[section], [field]: value } }));
      const handleNestedInputChange = (section, nested, field, value) => setLocalData(prev => ({ ...prev, [section]: { ...prev[section], [nested]: { ...prev[section][nested], [field]: value }}}));
      const handleListItemChange = (section, index, field, value) => setLocalData(prev => ({ ...prev, [section]: prev[section].map((item, i) => i === index ? { ...item, [field]: value } : item) }));
      const handleRemoveItem = (section, index) => setLocalData(prev => ({ ...prev, [section]: prev[section].filter((_, i) => i !== index) }));
      const handleAddItem = (section, newItem) => setLocalData(prev => ({ ...prev, [section]: [...prev[section], newItem] }));
      const handlePaletteChange = (name, value) => setLocalData(prev => ({ ...prev, palette: { ...prev.palette, [name]: value } }));
      
      const CollapsibleSection = ({ title, sectionKey, children }) => (
        <fieldset className="border border-gray-700 p-6 rounded-lg">
          <legend className="text-xl font-semibold px-2 text-indigo-400 w-full cursor-pointer" onClick={() => toggleSection(sectionKey)}>
            <div className="w-full flex justify-between items-center">
              <span>{title}</span>
              <ChevronIcon className={`w-5 h-5 transition-transform text-gray-400 ${openSections[sectionKey] ? 'rotate-180' : ''}`} />
            </div>
          </legend>
          <div className={`collapsible-content pt-4 ${!openSections[sectionKey] ? 'collapsed' : ''}`} style={{maxHeight: openSections[sectionKey] ? '5000px' : '0'}}>
            {children}
          </div>
        </fieldset>
      );
      
      const notificationColor = notification.type === 'success' ? 'border-green-500' : 'border-red-500';

      return (
        <div className="bg-gray-900 min-h-screen text-white p-4 sm:p-8">
          <div className="container mx-auto max-w-4xl">
            <header className="flex flex-col sm:flex-row justify-between items-center mb-8">
              <div><h1 className="text-3xl sm:text-4xl font-bold mb-2">Painel de Gerenciamento</h1><p className="text-gray-400">As alterações são publicadas online instantaneamente.</p></div>
              <a href="/#" className="mt-4 sm:mt-0 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-full transition duration-300">Voltar ao Site</a>
            </header>
            <main className="space-y-12">
              <CollapsibleSection title="Informações da Empresa" sectionKey="companyInfo">
                <div className="space-y-4">
                  <label className="block text-sm font-medium text-gray-400 mb-1">Nome da Empresa</label>
                  <input type="text" value={localData.companyInfo.name} onChange={e => handleInputChange('companyInfo', 'name', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                  <label className="block text-sm font-medium text-gray-400 mb-1">URL do Logotipo</label>
                  <input type="text" value={localData.companyInfo.logoUrl} onChange={e => handleInputChange('companyInfo', 'logoUrl', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                </div>
              </CollapsibleSection>
              <CollapsibleSection title="Menu do Cabeçalho" sectionKey="menuItems">
                {localData.menuItems.map((item, index) => (
                  <div key={index} className="flex items-end gap-4 border-b border-gray-800 pb-4 mb-4">
                    <div className="flex-grow"><label className="block text-sm font-medium text-gray-400">Texto</label><input type="text" value={item.text} onChange={e => handleListItemChange('menuItems', index, 'text', e.target.value)} className="w-full bg-gray-700 border-gray-600 rounded-md p-2"/></div>
                    <div className="flex-grow"><label className="block text-sm font-medium text-gray-400">Link</label><input type="text" value={item.link} onChange={e => handleListItemChange('menuItems', index, 'link', e.target.value)} className="w-full bg-gray-700 border-gray-600 rounded-md p-2"/></div>
                    <button onClick={() => handleRemoveItem('menuItems', index)} className="bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-3 rounded-md">&times;</button>
                  </div>
                ))}
                <button onClick={() => handleAddItem('menuItems', {text: 'Novo Item', link: '#'})} className="mt-4 bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-md">Adicionar Item</button>
              </CollapsibleSection>
              <CollapsibleSection title="Paleta de Cores" sectionKey="palette">
                <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                  {Object.entries(localData.palette).map(([name, value]) => (
                    <div key={name}>
                      <label className="block text-sm font-medium text-gray-400 mb-2 capitalize">{name.replace(/([A-Z])/g, ' $1').trim()}</label>
                      <div className="flex items-center gap-2">
                        <input type="color" value={value} onChange={e => handlePaletteChange(name, e.target.value)} className="w-12 h-10 p-0 bg-gray-700 border-none rounded-md cursor-pointer"/>
                        <input type="text" value={value} onChange={e => handlePaletteChange(name, e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"/>
                      </div>
                    </div>
                  ))}
                </div>
              </CollapsibleSection>
              <CollapsibleSection title="Seção Hero" sectionKey="hero">
                <div className="space-y-4">
                  <label className="block text-sm font-medium text-gray-400 mb-1">Título (Linha 1)</label>
                  <input type="text" value={localData.hero.titleLine1} onChange={e => handleInputChange('hero', 'titleLine1', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                  <label className="block text-sm font-medium text-gray-400 mb-1">Título (Linha 2)</label>
                  <input type="text" value={localData.hero.titleLine2} onChange={e => handleInputChange('hero', 'titleLine2', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                  <label className="block text-sm font-medium text-gray-400 mb-1">Subtítulo</label>
                  <textarea value={localData.hero.subtitle} onChange={e => handleInputChange('hero', 'subtitle', e.target.value)} rows="3" className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                  <label className="block text-sm font-medium text-gray-400 mb-1">URL do Vídeo (YouTube)</label>
                  <input type="text" value={localData.hero.videoUrl} onChange={e => handleInputChange('hero', 'videoUrl', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                  <label className="flex items-center cursor-pointer"><input type="checkbox" checked={localData.hero.showVideo} onChange={e => handleInputChange('hero', 'showVideo', e.target.checked)} className="form-checkbox h-5 w-5 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500"/><span className="ml-2 text-gray-300">Exibir vídeo na seção Hero</span></label>
                </div>
              </CollapsibleSection>
              <CollapsibleSection title="Seção de Depoimentos" sectionKey="testimonials">
                {localData.testimonials.map((item, index) => (
                  <div key={index} className="space-y-4 border-b border-gray-800 pb-6 mb-6">
                    <div className="flex justify-between items-center"><h3 className="text-lg font-medium text-gray-300">Depoimento {index + 1}</h3><button onClick={() => handleRemoveItem('testimonials', index)} className="bg-red-600 hover:bg-red-500 text-white font-bold py-1 px-3 rounded-md">&times;</button></div>
                    <input type="text" placeholder="Nome" value={item.name} onChange={e => handleListItemChange('testimonials', index, 'name', e.target.value)} className="w-full bg-gray-700 p-2 rounded-md"/>
                    <input type="text" placeholder="Cargo" value={item.role} onChange={e => handleListItemChange('testimonials', index, 'role', e.target.value)} className="w-full bg-gray-700 p-2 rounded-md"/>
                    <textarea placeholder="Citação" value={item.quote} onChange={e => handleListItemChange('testimonials', index, 'quote', e.target.value)} rows="3" className="w-full bg-gray-700 p-2 rounded-md"/>
                    <input type="text" placeholder="URL do Avatar" value={item.avatarUrl} onChange={e => handleListItemChange('testimonials', index, 'avatarUrl', e.target.value)} className="w-full bg-gray-700 p-2 rounded-md"/>
                  </div>
                ))}
                 <button onClick={() => handleAddItem('testimonials', {name: '', role: '', quote: '', avatarUrl: ''})} className="mt-4 bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-md">Adicionar Depoimento</button>
              </CollapsibleSection>
              <CollapsibleSection title="Seção de FAQ" sectionKey="faq">
                {localData.faq.map((item, index) => (
                  <div key={index} className="space-y-4 border-b border-gray-800 pb-6 mb-6">
                     <div className="flex justify-between items-center"><h3 className="text-lg font-medium text-gray-300">Pergunta {index + 1}</h3><button onClick={() => handleRemoveItem('faq', index)} className="bg-red-600 hover:bg-red-500 text-white font-bold py-1 px-3 rounded-md">&times;</button></div>
                    <input type="text" placeholder="Pergunta" value={item.question} onChange={e => handleListItemChange('faq', index, 'question', e.target.value)} className="w-full bg-gray-700 p-2 rounded-md"/>
                    <textarea placeholder="Resposta" value={item.answer} onChange={e => handleListItemChange('faq', index, 'answer', e.target.value)} rows="3" className="w-full bg-gray-700 p-2 rounded-md"/>
                  </div>
                ))}
                <button onClick={() => handleAddItem('faq', {question: '', answer: ''})} className="mt-4 bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-md">Adicionar Pergunta</button>
              </CollapsibleSection>
              <CollapsibleSection title="Rodapé" sectionKey="footerInfo">
                <div className="space-y-4">
                    <label className="block text-sm font-medium text-gray-400 mb-1">Slogan</label>
                    <input type="text" value={localData.companyInfo.tagline} onChange={e => handleInputChange('companyInfo', 'tagline', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                    <label className="block text-sm font-medium text-gray-400 mb-1">Endereço</label>
                    <textarea value={localData.footerInfo.address} onChange={e => handleInputChange('footerInfo', 'address', e.target.value)} rows="3" className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                    <label className="block text-sm font-medium text-gray-400 mb-1">Telefone</label>
                    <input type="text" value={localData.footerInfo.phone} onChange={e => handleInputChange('footerInfo', 'phone', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                    <label className="block text-sm font-medium text-gray-400 mb-1">E-mail</label>
                    <input type="email" value={localData.footerInfo.email} onChange={e => handleInputChange('footerInfo', 'email', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                    <h3 className="text-lg font-medium text-gray-300 pt-4">Redes Sociais</h3>
                    <label className="block text-sm font-medium text-gray-400 mb-1">Facebook URL</label>
                    <input type="text" value={localData.footerInfo.social.facebook} onChange={e => handleNestedInputChange('footerInfo', 'social', 'facebook', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                    <label className="block text-sm font-medium text-gray-400 mb-1">Instagram URL</label>
                    <input type="text" value={localData.footerInfo.social.instagram} onChange={e => handleNestedInputChange('footerInfo', 'social', 'instagram', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                    <label className="block text-sm font-medium text-gray-400 mb-1">Twitter URL</label>
                    <input type="text" value={localData.footerInfo.social.twitter} onChange={e => handleNestedInputChange('footerInfo', 'social', 'twitter', e.target.value)} className="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3"/>
                </div>
              </CollapsibleSection>
            </main>
          </div>
          <button onClick={handleSave} className="save-button bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-full transition duration-300 shadow-lg flex items-center"><svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" /></svg>Publicar Alterações Online</button>
          <div className={`notification bg-gray-800 border ${notificationColor} text-white py-2 px-4 rounded-lg shadow-lg ${notification.visible ? '' : 'hidden'}`}>{notification.message}</div>
        </div>
      );
    };

    // --- APLICAÇÃO PRINCIPAL ---
    const App = () => {
      const [siteData, setSiteData] = useState(null);
      const [isLoading, setIsLoading] = useState(true);
      const [error, setError] = useState(null);
      const [route, setRoute] = useState(window.location.hash);
      const [contentDocRef, setContentDocRef] = useState(null);

      useEffect(() => {
        // --- INÍCIO DA CONFIGURAÇÃO DO FIREBASE ---
        const firebaseConfig = {
          apiKey: "AIzaSyC8TxUoSQEnSMbZ-TAetQ_KyegiGnk6tkE",
          authDomain: "site-template-af1d6.firebaseapp.com",
          projectId: "site-template-af1d6",
          storageBucket: "site-template-af1d6.appspot.com",
          messagingSenderId: "162960459636",
          appId: "1:162960459636:web:65f5c7e6f7e278fc588e21",
          measurementId: "G-V22EXQB4WK"
        };
        // --- FIM DA CONFIGURAÇÃO DO FIREBASE ---

        // Dados de fallback caso o Firebase não carregue ou esteja vazio.
        const fallbackData = {"companyInfo":{"name":"Nebula","logoUrl":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJ3LTggaC04IHRleHRbdmFyKC0tY29sb3ItYWNjZW50KV0iIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZUxpbmVjYXA9InJvdW5kIiBzdHJva2VMaW5lam9pbj0icm91bmQiIHN0cm9rZVdpZHRoPSIyIiBkPSJNNSAzbjRNMyA1aDRNNiAxN3Y0bS0yLTJoNG01LTE2bDIuMjg2IDYuODU3TDIxIDEybC01LjcxNCAyLjE0M0wxMyAyMWwtMi4yODYtNi4yNTdMNSAxMmw1LjcxNC0yLjE0M0wxMyAzWiIgLz48L3N2Zz4=","tagline":"Uma experiência celestial, criada para você."},"menuItems":[{"text":"Funcionalidades","link":"#interest"},{"text":"Soluções","link":"#solutions"},{"text":"Depoimentos","link":"#desire"},{"text":"Comprar Agora","link":"#comprar"}],"palette":{"primary":"#6366f1","accent":"#818cf8","backgroundDark":"#111827","backgroundLight":"#1f2937","textPrimary":"#ffffff","textSecondary":"#9ca3af"},"hero":{"titleLine1":"Transforme Suas Noites.","titleLine2":"Descubra o Universo com Nebula.","subtitle":"Adormeça sob um céu estrelado personalizado, ao som de paisagens sonoras relaxantes, e desperte sentindo-se completamente renovado.","videoUrl":"https://www.youtube.com/watch?v=LXb3EKWsInQ","showVideo":true},"footerInfo":{"address":"Rua das Estrelas, 123\nCosmos, SP - 01234-567","phone":"(11) 91234-5678","email":"contato@nebula.inc","social":{"facebook":"#","instagram":"#","twitter":"#"}},"features":[{"title":"Projeções Hiper-realistas","description":"Nossa tecnologia patenteada mapeia constelações reais e nebulosas vibrantes, criando uma experiência imersiva única no seu teto."},{"title":"Paisagens Sonoras com IA","description":"Sincronizado com a projeção, o Nebula gera sons ambientes relaxantes que se adaptam ao seu ritmo de sono para uma noite perfeita."},{"title":"Controle Inteligente","description":"Use nosso aplicativo para escolher seu céu noturno, programar sessões de relaxamento e integrar com sua casa inteligente."}],"solutions":[{"imageUrl":"https://picsum.photos/600/400?random=6","title":"Sono Profundo e Restaurador","description":"Crie o ambiente perfeito para adormecer. As projeções calmantes e os sons adaptativos reduzem a ansiedade e promovem um sono mais profundo e reparador.","buttonText":"Melhore seu Sono"},{"imageUrl":"https://picsum.photos/600/400?random=7","title":"Foco para Meditação e Yoga","description":"Transforme qualquer cômodo em um santuário de paz. Use o Nebula para criar um cenário imersivo que aprofunda sua concentração e relaxamento durante a meditação.","buttonText":"Encontre sua Paz"},{"imageUrl":"https://picsum.photos/600/400?random=8","title":"Noites Mágicas para Crianças","description":"Estimule a imaginação dos seus filhos e acalme o medo do escuro. Uma galáxia no teto torna a hora de dormir uma aventura divertida e tranquila.","buttonText":"Encante Seus Filhos"}],"testimonials":[{"name":"Ana S.","role":"Designer de Interiores","quote":"O Nebula mudou completamente minha rotina de sono. Nunca me senti tão relaxada e inspirada ao acordar. É a peça central do meu quarto.","avatarUrl":"https://picsum.photos/100/100?random=2"},{"name":"Marcos P.","role":"Desenvolvedor de Software","quote":"É como ter um pedaço do universo no meu quarto. Me ajuda a desligar depois de um dia longo de codificação. Meus filhos também adoram!","avatarUrl":"https://picsum.photos/100/100?random=3"},{"name":"Juliana F.","role":"Professora de Yoga","quote":"Uso o Nebula durante minhas sessões de meditação em casa. A combinação das luzes e sons é simplesmente mágica. Recomendo a todos os meus alunos.","avatarUrl":"https://picsum.photos/100/100?random=4"}],"faq":[{"question":"Qual a diferença do Nebula para outros projetores de estrelas?","answer":"O Nebula utiliza projeção a laser de alta definição para mapear constelações reais e é o único com um sistema de som inteligente que se adapta ao seu ambiente e ritmo de sono para uma imersão completa."},{"question":"A instalação é complicada?","answer":"Não! Basta ligar o Nebula na tomada, conectá-lo ao Wi-Fi através do nosso aplicativo intuitivo e ele está pronto para usar. Leva menos de 5 minutos."},{"question":"Posso usar minhas próprias músicas ou playlists?","answer":"Sim! O Nebula funciona como uma caixa de som Bluetooth de alta qualidade. Você pode conectar seu celular e ouvir suas músicas, podcasts ou audiolivros favoritos sob as estrelas."},{"question":"Qual a política de garantia e devolução?","answer":"Oferecemos uma garantia de 1 ano contra defeitos de fabricação e uma política de devolução sem perguntas de 30 dias. Se você não amar seu Nebula, nós devolvemos o seu dinheiro."}],"cta":{"title":"Pronto Para Viajar Pelas Estrelas?","subtitle":"Receba seu Nebula em casa com frete grátis e transforme seu quarto no seu santuário pessoal. Garantia de 30 dias para devolução.","originalPrice":"R$ 1.199,00","discountedPrice":"R$ 899,00","buttonText":"Comprar Agora e Garantir o Seu"}};

        try {
            if (!firebase.apps.length) {
              firebase.initializeApp(firebaseConfig);
            }
            const db = firebase.firestore();
            const docRef = db.collection("content").doc("site");
            setContentDocRef(docRef);

            const fetchContent = async () => {
              try {
                const docSnap = await docRef.get();
                if (docSnap.exists()) {
                  setSiteData(docSnap.data());
                } else {
                  console.warn("Documento não encontrado no Firestore. Usando dados de fallback.");
                  setSiteData(fallbackData);
                }
              } catch (e) {
                console.error("Erro ao buscar dados do Firestore. Usando dados de fallback.", e);
                setError("Não foi possível conectar ao banco de dados. Exibindo versão offline.");
                setSiteData(fallbackData);
              } finally {
                setIsLoading(false);
              }
            };
            fetchContent();
        } catch (e) {
            console.error("Erro ao inicializar o Firebase. Verifique sua configuração.", e);
            setError("Configuração do Firebase inválida. Exibindo versão offline.");
            setSiteData(fallbackData);
            setIsLoading(false);
        }

      }, []);

      useEffect(() => {
        const handleHashChange = () => setRoute(window.location.hash);
        window.addEventListener('hashchange', handleHashChange);
        return () => window.removeEventListener('hashchange', handleHashChange);
      }, []);

      if (isLoading) return <div className="loader-container">Carregando Conteúdo...</div>;
      if (!siteData) return <div className="loader-container">Erro ao carregar dados. {error}</div>;
      
      const { palette } = siteData;
      const dynamicStyles = `:root {
            --color-primary: ${palette.primary}; --color-accent: ${palette.accent};
            --color-background-dark: ${palette.backgroundDark}; --color-background-light: ${palette.backgroundLight};
            --color-text-primary: ${palette.textPrimary}; --color-text-secondary: ${palette.textSecondary};
      }`;

      return (
        <Fragment>
          <style>{dynamicStyles}</style>
          {route === '#/admin' ? (
            <AdminDashboard data={siteData} contentDocRef={contentDocRef} />
          ) : (
            <Fragment>
              <Header companyInfo={siteData.companyInfo} menuItems={siteData.menuItems} />
              <main>
                <Hero content={siteData.hero} />
                <Features features={siteData.features} />
                <Solutions solutions={siteData.solutions} />
                <Testimonials testimonials={siteData.testimonials} />
                <FAQ faqData={siteData.faq} />
                <CTA content={siteData.cta} />
              </main>
              <Footer companyInfo={siteData.companyInfo} footerInfo={siteData.footerInfo} />
            </Fragment>
          )}
        </Fragment>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>